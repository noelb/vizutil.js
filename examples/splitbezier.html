<!DOCTYPE html>
<html>

<head>
    <title>Split Bezier</title>
    <link rel="stylesheet" href="main.css" />
</head>

<body>

<script src="../src/geom_util.js"></script>


<h1>Split Bezier</h1>
<pre>
    let pnts = [ {x:0,y:0}, {x:23,y:-4}, ... ]; //The points you want to draw a curve through
    let splinePnts = GeomUtil.cspline(pnts,.02); //Will return an array of points forming a path
</pre>



<script>
let width = 500; //The size of the SVG canvas
let border = 50; //Keep the points from being too close to the edges

//Create a set of random points
let pnts = [];
for (let i=0; i < 10; i++) {
    pnts.push( {
        x:(width-border*2)*Math.random() + border,
        y:(width-border*2)*Math.random() + border
    } );
}

//Create the spline
let spline = GeomUtil.cspline(pnts,.02);



/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */



//Create an SVG document
let splineSVG = document.createElementNS("http://www.w3.org/2000/svg", "svg");
splineSVG.setAttributeNS(null,"width",500);
splineSVG.setAttributeNS(null,"height",500);
document.body.appendChild(splineSVG);



//Convert a spline to an SVG path
let pathStr = "";
for (let i=0; i < spline.length; i++) {
    if (i == 0) pathStr += "M "; else pathStr += "L ";
    pathStr += spline[i].x+" "+spline[i].y+" ";
}
let path = document.createElementNS("http://www.w3.org/2000/svg", "path");
path.setAttributeNS(null, "d", pathStr);
path.setAttributeNS(null, "stroke", "black");
path.setAttributeNS(null, "stroke-width", ".5");
path.setAttributeNS(null, "opacity", ".2");
path.setAttributeNS(null, "fill", "none");
splineSVG.appendChild(path);


//Draw an "X" for every intersection point
let size = 3;
for (let i=0; i < pnts.length; i++) {
    let path = document.createElementNS("http://www.w3.org/2000/svg", "path");
    path.setAttributeNS(null, "d",
            "M "+ (pnts[i].x-size) +" "+ (pnts[i].y-size) +" "+
            "L "+ (pnts[i].x+size) +" "+ (pnts[i].y+size) +" "+
            "M "+ (pnts[i].x-size) +" "+ (pnts[i].y+size) +" "+
            "L "+ (pnts[i].x+size) +" "+ (pnts[i].y-size)
    );
    path.setAttributeNS(null, "stroke", "black");
    path.setAttributeNS(null, "stroke-width", ".5");
    path.setAttributeNS(null, "opacity", "1");
    path.setAttributeNS(null, "fill", "none");
    splineSVG.appendChild(path);
}

</script>


</body>
</html>