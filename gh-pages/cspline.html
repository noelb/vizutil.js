---
layout: default
title: Catmull-Rom Spline
---

<p>
    Catmull-Rom splines allow you to draw a smooth curve through a series of points, something that's fairly difficult
    to achieve with beziers. Read more: <a href="https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Catmull.E2.80.93Rom_spline">Wikipedia</a>
</p>

<p>
    Trivia: <a href="https://en.wikipedia.org/wiki/Edwin_Catmull">Ed Catmull</a>, one of the founders of Pixar, was co-inventor and one of the namesakes of Catmull-Rom splines.
</p>

<pre>
//The points you want to draw a curve through
var pnts = [ {x:0,y:0}, {x:23,y:-4}, ... ];

//Will return an array of points forming a path
var splinePnts = GeomUtil.csplineXY(pnts,.02);
</pre>

<div class="diagram">
    <!-- The SVG diagram will be appended here -->
</div>

<form onsubmit="refresh(); return false;">
    <li>
        <button>Randomize</button><br/>
    </li>
</form>



<script>
var width = 500; //The size of the SVG canvas
var border = 50; //Keep the points from being too close to the edges
var splineSVG = null;

function refresh() {
    if (splineSVG != null) splineSVG.parentElement.removeChild(splineSVG);

    //Create a set of random points
    var pnts = [];
    for (var i = 0; i < 10; i++) {
        pnts.push({
            x: (width - border * 2) * Math.random() + border,
            y: (width - border * 2) * Math.random() + border
        });
    }

    //Create the spline
    var spline = GeomUtil.csplineXY(pnts, .02);


    /* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */


    //Create an SVG document
    splineSVG = document.createElementNS("http://www.w3.org/2000/svg", "svg");
    splineSVG.setAttribute("width", width.toString() );
    splineSVG.setAttribute("height", width.toString() );
    document.getElementsByClassName("diagram")[0].appendChild(splineSVG);


    //Convert a spline to an SVG path
    var path = SvgUtil.getPath(document, spline);
    path.setAttribute("stroke", "black");
    path.setAttribute("stroke-width", ".5");
    path.setAttribute("opacity", ".2");
    path.setAttribute("fill", "none");
    splineSVG.appendChild(path);


    //Draw an "X" for every intersection point
    var size = 3;
    for (var i = 0; i < pnts.length; i++) {
        var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
        path.setAttribute("d",
                "M " + (pnts[i].x - size) + " " + (pnts[i].y - size) + " " +
                "L " + (pnts[i].x + size) + " " + (pnts[i].y + size) + " " +
                "M " + (pnts[i].x - size) + " " + (pnts[i].y + size) + " " +
                "L " + (pnts[i].x + size) + " " + (pnts[i].y - size)
        );
        path.setAttribute("stroke", "black");
        path.setAttribute("stroke-width", ".5");
        path.setAttribute("opacity", "1");
        path.setAttribute("fill", "none");
        splineSVG.appendChild(path);
    }
}

refresh();

</script>